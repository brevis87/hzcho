[html]


<div id="cupidStatsContainer">
    <!-- –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
    <div class="cupid-card">
        <h2 class="cupid-gold">üìä –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê</h2>
        <div class="stats-row">
            <p>üéÆ –í—Å–µ–≥–æ –∏–≥—Ä: <b id="cupid-total-games">0</b></p>
            <p>üèÜ –í—Å–µ–≥–æ –æ—á–∫–æ–≤: <b id="cupid-total-score">0</b></p>
            <p>üìà –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <b id="cupid-avg-score">0</b></p>
        </div>
    </div>

    <!-- –†–ï–ô–¢–ò–ù–ì –ò–ì–†–û–ö–û–í -->
    <div class="cupid-card">
        <h2 class="cupid-gold">üèÖ –†–ï–ô–¢–ò–ù–ì –ö–£–ü–ò–î–û–ù–û–í</h2>
        
        <!-- –ú–ï–î–ê–õ–ò –¢–û–ü-3 -->
        <div class="medals-container">
            <div id="cupid-medal-1" class="medal-card medal-gold" style="display: none;">
                <span class="medal-emoji">ü•á</span>
                <div class="medal-name" id="cupid-medal-1-name"></div>
                <div class="medal-score" id="cupid-medal-1-score"></div>
                <div class="medal-stats" id="cupid-medal-1-stats"></div>
            </div>
            <div id="cupid-medal-2" class="medal-card medal-silver" style="display: none;">
                <span class="medal-emoji">ü•à</span>
                <div class="medal-name" id="cupid-medal-2-name"></div>
                <div class="medal-score" id="cupid-medal-2-score"></div>
                <div class="medal-stats" id="cupid-medal-2-stats"></div>
            </div>
            <div id="cupid-medal-3" class="medal-card medal-bronze" style="display: none;">
                <span class="medal-emoji">ü•â</span>
                <div class="medal-name" id="cupid-medal-3-name"></div>
                <div class="medal-score" id="cupid-medal-3-score"></div>
                <div class="medal-stats" id="cupid-medal-3-stats"></div>
            </div>
        </div>

        <!-- –¢–ê–ë–õ–ò–¶–ê –ò–ì–†–û–ö–û–í -->
        <div class="table-container">
            <table class="cupid-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>–ò–≥—Ä–æ–∫</th>
                        <th class="text-right">–ò–≥—Ä</th>
                        <th class="text-right">–õ—É—á—à–∏–π</th>
                        <th class="text-right">–°—Ä–µ–¥–Ω–∏–π</th>
                        <th class="text-right">–í—Å–µ–≥–æ</th>
                    </tr>
                </thead>
                <tbody id="cupid-players-table-body">
                    <tr><td colspan="6" class="empty-state">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± –∏–≥—Ä–æ–∫–∞—Ö</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- –†–ï–ô–¢–ò–ù–ì –ü–ê–† -->
    <div class="cupid-card">
        <h2 class="cupid-pink">üëØ –ü–û–ü–£–õ–Ø–†–ù–´–ï –ü–ê–†–´</h2>
        
        <div class="table-container">
            <table class="cupid-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>–ü–∞—Ä–∞</th>
                        <th class="text-right">–°–æ–∑–¥–∞–Ω–æ —Ä–∞–∑</th>
                    </tr>
                </thead>
                <tbody id="cupid-pairs-table-body">
                    <tr><td colspan="3" class="empty-state">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- –†–ï–ô–¢–ò–ù–ì –¶–ï–õ–ï–ô -->
    <div class="cupid-card">
        <h2 class="cupid-blue">üéØ –ò–ó–õ–Æ–ë–õ–ï–ù–ù–´–ï –¶–ï–õ–ò</h2>
        
        <div class="target-highlights">
            <div id="cupid-target-top" class="target-card" style="display: none;">
                <div class="target-emoji">üéØ</div>
                <div class="target-name" id="cupid-target-top-name"></div>
                <div class="target-count" id="cupid-target-top-count"></div>
                <div class="gray-text">–ø–æ–ø–∞–¥–∞–Ω–∏–π</div>
                <div class="target-label">–°–ê–ú–ê–Ø –ß–ê–°–¢–ê–Ø –¶–ï–õ–¨</div>
            </div>
            <div id="cupid-target-rare" class="target-card" style="display: none;">
                <div class="target-emoji">üëª</div>
                <div class="target-name" id="cupid-target-rare-name"></div>
                <div class="target-count" id="cupid-target-rare-count"></div>
                <div class="gray-text">–ø–æ–ø–∞–¥–∞–Ω–∏–π</div>
                <div class="target-label" id="cupid-target-rare-label">–ù–ï–£–õ–û–í–ò–ú–´–ô –î–ñ–û</div>
            </div>
        </div>

        <h3 class="cupid-blue">üìã –ü–û–õ–ù–´–ô –†–ï–ô–¢–ò–ù–ì –¶–ï–õ–ï–ô</h3>
        
        <div class="table-container">
            <table class="cupid-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>–ê–≤–∞—Ç–∞—Ä</th>
                        <th class="text-right">–ü–æ–ø–∞–¥–∞–Ω–∏–π</th>
                    </tr>
                </thead>
                <tbody id="cupid-targets-table-body">
                    <tr><td colspan="4" class="empty-state">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ø–∞–¥–∞–Ω–∏—è—Ö</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- –†–ï–ô–¢–ò–ù–ì –§–ò–ù–ê–õ–û–í -->
    <div class="cupid-card">
        <h2 class="cupid-red">üòà –ò–• –í–°–ï –•–û–¢–Ø–¢ –£–ö–†–ê–°–¢–¨</h2>
        
        <!-- –ú–ï–î–ê–õ–ò –§–ò–ù–ê–õ–û–í –¢–û–ü-3 -->
        <div class="medals-container">
            <div id="cupid-final-1" class="medal-card" style="display: none; background: rgba(220,20,60,0.1); border: 1px solid #dc143c;">
                <span class="medal-emoji">ü•á</span>
                <div class="medal-name" id="cupid-final-1-name"></div>
                <div class="medal-score" id="cupid-final-1-score" style="color: #dc143c;"></div>
                <div class="medal-stats">—Ä–∞–∑(–∞) –ø—ã—Ç–∞–ª–∏—Å—å —É—Ç—è–Ω—É—Ç—å –∏–∑ –ø–∞—Ä—ã</div>
            </div>
            <div id="cupid-final-2" class="medal-card" style="display: none; background: rgba(178,34,34,0.1); border: 1px solid #dc143c;">
                <span class="medal-emoji">ü•à</span>
                <div class="medal-name" id="cupid-final-2-name"></div>
                <div class="medal-score" id="cupid-final-2-score" style="color: #dc143c;"></div>
                <div class="medal-stats">—Ä–∞–∑(–∞) –ø—ã—Ç–∞–ª–∏—Å—å —É—Ç—è–Ω—É—Ç—å –∏–∑ –ø–∞—Ä—ã</div>
            </div>
            <div id="cupid-final-3" class="medal-card" style="display: none; background: rgba(139,0,0,0.1); border: 1px solid #dc143c;">
                <span class="medal-emoji">ü•â</span>
                <div class="medal-name" id="cupid-final-3-name"></div>
                <div class="medal-score" id="cupid-final-3-score" style="color: #dc143c;"></div>
                <div class="medal-stats">—Ä–∞–∑(–∞) –ø—ã—Ç–∞–ª–∏—Å—å —É—Ç—è–Ω—É—Ç—å –∏–∑ –ø–∞—Ä—ã</div>
            </div>
        </div>

        <div class="table-container">
            <table class="cupid-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>–ò–º—è</th>
                        <th class="text-right">–ü—ã—Ç–∞–ª–∏—Å—å —É—Ç—è–Ω—É—Ç—å –∏–∑ –ø–∞—Ä—ã</th>
                    </tr>
                </thead>
                <tbody id="cupid-finals-table-body">
                    <tr><td colspan="3" class="empty-state">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫—Ä–∞–∂–µ</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- –§–£–¢–ï–† -->
    <div class="cupid-footer">
        –î–∞–Ω–Ω—ã–µ –æ—Ç: <span id="cupid-last-update">–∑–∞–≥—Ä—É–∑–∫–∞...</span>
    </div>
</div>






<style>



/* === –ì–õ–û–ë–ê–õ–¨–ù–´–ô –¶–í–ï–¢ –§–û–ù–ê (–ú–ï–ù–Ø–ï–®–¨ –¢–û–õ–¨–ö–û –¢–£–¢) === */
:root{
--cupid-bg-main: #2b273a;
--cupid-bg-soft: #312d44;
--cupid-bg-row1: #35314a;
--cupid-bg-row2: #2a263b;
--cupid-bg-hover: #403c5c;
--cupid-border: #4c4770;

--cupid-text-main: #f2efff;
--cupid-text-soft: #bdb6e6;
}



/* ============= –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò ============= */
.cupid-card {
    background: #2a2a2a;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
	color: white;
}

.cupid-card h2 {
    margin-top: 0;
    margin-bottom: 0px;
    font-size: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.cupid-card h3 {
    margin: 20px 0 10px;
    font-size: 18px;
}

.cupid-gold { color: #ffd700; }
.cupid-pink { color: #ff69b4; }
.cupid-blue { color: #87ceeb; }
.cupid-red { color: #dc143c; }

/* –°–¢–ê–¢–ò–°–¢–ò–ö–ê */
.stats-row {
    display: flex;
    gap: 30px;
    font-size: 16px;
}

.stats-row p {
    margin: 10px 0;
}

.stats-row b {
    color: #fff;
    font-size: 18px;
    margin-left: 5px;
}

/* –ú–ï–î–ê–õ–ò */
.medals-container {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.medal-card {
    flex: 1;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.medal-gold {
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid #ffd700;
}

.medal-silver {
    background: rgba(192, 192, 192, 0.1);
    border: 1px solid #c0c0c0;
}

.medal-bronze {
    background: rgba(205, 127, 50, 0.1);
    border: 1px solid #cd7f32;
}

.medal-emoji {
    font-size: 32px;
    display: block;
    margin-bottom: 5px;
}

.medal-name {
    font-weight: bold;
    font-size: 16px;
    margin: 5px 0;
    color: #fff;
}

.medal-score {
    font-size: 20px;
    font-weight: bold;
}

.medal-gold .medal-score { color: #ffd700; }
.medal-silver .medal-score { color: #c0c0c0; }
.medal-bronze .medal-score { color: #cd7f32; }

.medal-stats {
    font-size: 12px;
    color: #999;
    margin-top: 5px;
}

/* –¢–ê–ë–õ–ò–¶–´ */
.table-container {
    max-height: 200px;
    overflow-y: auto;
    border-radius: 4px;
    margin-top: 10px;
}

.cupid-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

.cupid-table th {
    background: #9e654c !important;
    padding: 10px 8px;
    text-align: left;
    position: sticky;
    top: 0;
    color: #fff !important;
    font-weight: bold;
}

.cupid-table td {
    padding: 8px;
}

.cupid-table tr:nth-child(even) {
    background: #2a2a2a;
}

.cupid-table tr:nth-child(odd) {
    background: #222;
}

.cupid-table tr:hover {
    background: #333;
}

.text-right {
    text-align: right;
}

.text-center {
    text-align: center;
}

.font-bold {
    font-weight: bold;
}

.gold-text { color: #ffd700; }
.pink-text { color: #ff69b4; }
.blue-text { color: #87ceeb; }
.red-text { color: #dc143c; }
.gray-text { color: #999; }

/* –ö–ù–û–ü–ö–ò "–ü–û–ö–ê–ó–ê–¢–¨ –ï–©–Å" –ü–û–õ–ù–û–°–¢–¨–Æ –°–ö–†–´–¢–´ */
.load-more {
    display: none !important;
}

/* –¶–ï–õ–ò */
.target-highlights {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.target-card {
    flex: 1;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
}

.target-card:first-child {
    background: rgba(65, 105, 225, 0.1);
    border: 1px solid #4169e1;
}

.target-card:last-child {
    background: rgba(128, 128, 128, 0.1);
    border: 1px solid #808080;
}

.target-emoji {
    font-size: 24px;
    margin-bottom: 5px;
}

.target-name {
    font-weight: bold;
    font-size: 16px;
    color: #fff;
    margin: 5px 0;
}

.target-count {
    font-size: 24px;
    font-weight: bold;
    margin: 5px 0;
}

.target-card:first-child .target-count { color: #4169e1; }
.target-card:last-child .target-count { color: #808080; }

.target-label {
    margin-top: 8px;
    font-size: 11px;
}

.target-card:first-child .target-label { color: #4169e1; }
.target-card:last-child .target-label { color: #808080; }

/* –°–¢–ê–¢–£–°–´ */
.status-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: bold;
}

.status-ghost { background: #808080; color: #fff; }
.status-top1 { background: #4169e1; color: #fff; }
.status-top3 { background: #87ceeb; color: #000; }

/* –ü–£–°–¢–´–ï –°–û–°–¢–û–Ø–ù–ò–Ø */
.empty-state {
    color: #999;
    padding: 30px;
    text-align: center;
    font-style: italic;
}

/* –§–£–¢–ï–† */
.cupid-footer {
    text-align: center;
    color: #999;
    padding: 15px;
    font-size: 12px;
    border-top: 1px solid #333;
    margin-top: 10px;
    font-family: 'Courier New', Courier, monospace;
}

/* === –ü–ï–†–ï–ö–†–ê–°–ö–ê –í–°–ï–ì–û === */

.cupid-card{
  background: var(--cupid-bg-main) !important;
  box-shadow: 0 0 0 1px var(--cupid-border);
  color: var(--cupid-text-main);
}


.cupid-table tr:nth-child(even){
  background: var(--cupid-bg-row1) !important;
}

.cupid-table tr:nth-child(odd){
  background: var(--cupid-bg-row2) !important;
}

.cupid-table tr:hover{
  background: var(--cupid-bg-hover) !important;
}

.cupid-footer{
  border-top:1px solid var(--cupid-border) !important;
  background: var(--cupid-bg-soft);
}


.medal-name,
.target-name,
.cupid-table td,
.stats-row b{
  color: var(--cupid-text-main) !important;
}

.medal-stats,
.gray-text,
.target-label{
  color: var(--cupid-text-soft) !important;
}


/* === –í–°–ï –ó–ê–ì–û–õ–û–í–ö–ò –°–î–ï–õ–ê–¢–¨ –õ–ò–õ–û–í–´–ú–ò === */

.cupid-card h2,
.cupid-card h3,
.cupid-table th{
  color:#e8aced !important;
}

/* –ù–û "–†–µ–π—Ç–∏–Ω–≥ –∫—É–ø–∏–¥–æ–Ω–æ–≤" –û–°–¢–ê–Å–¢–°–Ø –ó–û–õ–û–¢–´–ú */
.cupid-card h2 .cupid-gold{
  color:#ffd700 !important;
}


</style>

<script>
(function() {
    "use strict";

    // ============= –ö–û–ù–°–¢–ê–ù–¢–´ =============
    let currentData = null;

    // ============= –ó–ê–ü–†–û–° –ö –†–û–î–ò–¢–ï–õ–Æ =============
    function sendRequest() {
        const requestId = Math.random().toString(16).slice(2);
        window.parent.postMessage({ 
            CUPID_stats: true, 
            type: "CUPID_request", 
            requestId: requestId 
        }, "*");

        return new Promise(resolve => {
            const handler = (e) => {
                if (e.data?.CUPID_stats && 
                    e.data.type === "CUPID_response" && 
                    e.data.requestId === requestId) {
                    window.removeEventListener("message", handler);
                    resolve(e.data.data);
                }
            };
            
            window.addEventListener("message", handler);
            setTimeout(() => {
                window.removeEventListener("message", handler);
                resolve(null);
            }, 5000);
        });
    }

    // ============= –†–ï–ù–î–ï–† =============
    function renderAll(data) {
        if (!data) return;
        currentData = data;
        
        // –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        document.getElementById('cupid-total-games').textContent = data.totalGames || 0;
        document.getElementById('cupid-total-score').textContent = data.totalScore || 0;
        const avg = data.totalGames ? Math.round(data.totalScore / data.totalGames) : 0;
        document.getElementById('cupid-avg-score').textContent = avg;
        
        // –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        document.getElementById('cupid-last-update').textContent = new Date().toLocaleString();
        
        // –†–µ–Ω–¥–µ—Ä —Å–µ–∫—Ü–∏–π (–≤—Å–µ–≥–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é)
        renderPlayers(data.players);
        renderPairs(data.pairs);
        renderTargets(data.targets);
        renderFinals(data.finals);
    }

    // ============= –ò–ì–†–û–ö–ò =============
    function renderPlayers(players) {
        const tbody = document.getElementById('cupid-players-table-body');
        
        if (!players || Object.keys(players).length === 0) {
            tbody.innerHTML = '<tr><td colspan="6" class="empty-state">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± –∏–≥—Ä–æ–∫–∞—Ö</td></tr>';
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`cupid-medal-${i}`).style.display = 'none';
            }
            return;
        }

        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∏–≥—Ä–æ–∫–æ–≤
        const playersList = Object.entries(players)
            .map(([name, p]) => ({
                name,
                games: p.games || 0,
                bestScore: p.bestScore || 0,
                totalScore: p.totalScore || 0
            }))
            .sort((a, b) => b.bestScore - a.bestScore);

        // –ú–µ–¥–∞–ª–∏ –¢–û–ü-3
        for (let i = 0; i < 3; i++) {
            const medal = document.getElementById(`cupid-medal-${i+1}`);
            if (playersList[i]) {
                medal.style.display = 'block';
                document.getElementById(`cupid-medal-${i+1}-name`).textContent = playersList[i].name;
                document.getElementById(`cupid-medal-${i+1}-score`).textContent = playersList[i].bestScore;
                const avg = playersList[i].games ? Math.round(playersList[i].totalScore / playersList[i].games) : 0;
                document.getElementById(`cupid-medal-${i+1}-stats`).textContent = `–∏–≥—Ä: ${playersList[i].games} | —Å—Ä–µ–¥–Ω–∏–π: ${avg}`;
            } else {
                medal.style.display = 'none';
            }
        }

        // –¢–∞–±–ª–∏—Ü–∞ —Å–æ –í–°–ï–ú–ò –∏–≥—Ä–æ–∫–∞–º–∏ (–±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏)
        let html = '';
        playersList.forEach((p, i) => {
            const avg = p.games ? Math.round(p.totalScore / p.games) : 0;
            html += `<tr>
                <td>${i + 1}</td>
                <td class="font-bold">${p.name}</td>
                <td class="text-right">${p.games}</td>
                <td class="text-right gold-text font-bold">${p.bestScore}</td>
                <td class="text-right">${avg}</td>
                <td class="text-right">${p.totalScore}</td>
            </tr>`;
        });
        tbody.innerHTML = html;
    }

    // ============= –ü–ê–†–´ =============
    function renderPairs(pairs) {
        const tbody = document.getElementById('cupid-pairs-table-body');
        
        if (!pairs || Object.keys(pairs).length === 0) {
            tbody.innerHTML = '<tr><td colspan="3" class="empty-state">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä</td></tr>';
            return;
        }

        const pairsList = Object.entries(pairs).sort((a, b) => b[1] - a[1]);
        
        // –¢–∞–±–ª–∏—Ü–∞ —Å–æ –í–°–ï–ú–ò –ø–∞—Ä–∞–º–∏
        let html = '';
        pairsList.forEach(([key, count], i) => {
            const [p1, p2] = key.split('-');
            html += `<tr>
                <td>${i + 1}</td>
                <td>${p1} üîó ${p2}</td>
                <td class="text-right pink-text font-bold">${count}</td>
            </tr>`;
        });
        tbody.innerHTML = html;
    }

    // ============= –¶–ï–õ–ò =============
    function renderTargets(targets) {
        const tbody = document.getElementById('cupid-targets-table-body');
        
        if (!targets || Object.keys(targets).length === 0) {
            tbody.innerHTML = '<tr><td colspan="4" class="empty-state">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ø–∞–¥–∞–Ω–∏—è—Ö</td></tr>';
            document.getElementById('cupid-target-top').style.display = 'none';
            document.getElementById('cupid-target-rare').style.display = 'none';
            return;
        }

        const targetsList = Object.entries(targets).sort((a, b) => b[1] - a[1]);
        
        // –¢–æ–ø —Ü–µ–ª—å
        const topTarget = targetsList[0];
        document.getElementById('cupid-target-top').style.display = 'block';
        document.getElementById('cupid-target-top-name').textContent = topTarget[0];
        document.getElementById('cupid-target-top-count').textContent = topTarget[1];
        
        // –†–µ–¥–∫–∞—è —Ü–µ–ª—å
        const zeroHits = targetsList.filter(([_, c]) => c === 0);
        let rareTarget;
        if (zeroHits.length > 0) {
            rareTarget = zeroHits[0];
        } else {
            rareTarget = targetsList[targetsList.length - 1];
        }
        document.getElementById('cupid-target-rare').style.display = 'block';
        document.getElementById('cupid-target-rare-name').textContent = rareTarget[0];
        document.getElementById('cupid-target-rare-count').textContent = rareTarget[1];
        document.getElementById('cupid-target-rare-label').textContent = 
            rareTarget[1] === 0 ? '–ù–ò –†–ê–ó–£ –ù–ï –ü–û–ü–ê–õ–ò' : '–°–ê–ú–´–ô –†–ï–î–ö–ò–ô';

        // –¢–∞–±–ª–∏—Ü–∞ —Å–æ –í–°–ï–ú–ò —Ü–µ–ª—è–º–∏
        let html = '';
        targetsList.forEach(([name, count], i) => {
            
            html += `<tr>
                <td>${i + 1}</td>
                <td class="font-bold">${name}</td>
                <td class="text-right blue-text font-bold">${count}</td>
            </tr>`;
        });
        tbody.innerHTML = html;
    }

    // ============= –§–ò–ù–ê–õ–´ =============
    function renderFinals(finals) {
        const tbody = document.getElementById('cupid-finals-table-body');
        
        if (!finals || Object.keys(finals).length === 0) {
            tbody.innerHTML = '<tr><td colspan="3" class="empty-state">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫—Ä–∞–∂–µ</td></tr>';
            
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`cupid-final-${i}`).style.display = 'none';
            }
            return;
        }

        const finalsList = Object.entries(finals).sort((a, b) => b[1] - a[1]);
        
        // –ú–µ–¥–∞–ª–∏ –¢–û–ü-3
        for (let i = 0; i < 3; i++) {
            const medal = document.getElementById(`cupid-final-${i+1}`);
            if (finalsList[i]) {
                medal.style.display = 'block';
                document.getElementById(`cupid-final-${i+1}-name`).textContent = finalsList[i][0];
                document.getElementById(`cupid-final-${i+1}-score`).textContent = finalsList[i][1];
            } else {
                medal.style.display = 'none';
            }
        }

        // –¢–∞–±–ª–∏—Ü–∞ —Å–æ –í–°–ï–ú–ò —Ñ–∏–Ω–∞–ª–∞–º–∏
        let html = '';
        finalsList.forEach(([name, count], i) => {
            html += `<tr>
                <td>${i + 1}</td>
                <td class="font-bold">${name}</td>
                <td class="text-right red-text font-bold">${count}</td>
            </tr>`;
        });
        tbody.innerHTML = html;
    }

    // ============= –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =============
    async function init() {
        try {
            const data = await sendRequest();
            if (data) {
                renderAll(data);
            }
        } catch (e) {
            console.error(e);
            document.getElementById('cupid-last-update').textContent = '–æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
        }
    }

    init();
})();
</script>


[/html]
[hideprofile]

